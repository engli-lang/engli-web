(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();function L(t){const n={p:"p",b:"b",t:"t",d:"d",k:"k",g:"g",f:"f",v:"v",θ:"d",ð:"d",s:"s",z:"z",ʃ:"x",ʒ:"x",h:"h",m:"m",n:"n",ŋ:"q",l:"l",ɹ:"r",j:"j",w:"w",i:"y",ɪ:"y",e:"e",ɛ:"e",æ:"a",ʌ:"a",ɑ:"o",ɔ:"o",u:"u",ʊ:"u",ə:"u",ŏ:"w"};return t.split("").map(r=>n[r]||r).join("")}const z={are:"ar",you:"yw",your:"yr",those:"duwz",these:"dyz",this:"dis",that:"dot",of:"uv",off:"of",important:"impuwrtunt",to:"tu",note:"nuwt",engli:"eqly",is:"iz",more:"muwr",than:"dan",just:"just",new:"nw",phonetic:"funetik",rules:"rwlz",we:"wy",also:"olsuw",change:"ceynj",words:"wuwrdz",add:"ad",ones:"wonz",etc:"ets"};function j(t){return t===t.toLowerCase()?0:t===t.toUpperCase()?1:t[0]===t[0].toUpperCase()&&t.slice(1)===t.slice(1).toLowerCase()?2:0}function x(t){const n=t.split(" ");for(const s of n){let r=s;if(r=r.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase(),z[r]===void 0)return!1}return!0}async function C(t){const n=t.split(" "),s=await Promise.all(n.map(async e=>{var y,m;const o=((y=e.match(/^\W+/))==null?void 0:y[0])||"",l=((m=e.match(/\W+$/))==null?void 0:m[0])||"";e=e.replace(/^\W+/,"").replace(/\W+$/,"");const g=j(e);e=e.toLowerCase();let i=z[e],h=1;if(i===void 0){h=0;const c=await(await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e}`)).json();if(c.length===0||c.length===void 0)i=e;else if(c[0].phonetic)console.log("using phonetic",c[0].phonetic),i=L(c[0].phonetic.replaceAll("/",""));else{const v=c[0].phonetics;if(v.length===0)i=e;else{const w=v.find(u=>u.text);if(w===void 0)i=e;else{const u=w.text.replaceAll("/","");console.log("using phonetic",u),i=L(u)}}}}return g===1?i=i.toUpperCase():g===2&&(i=i[0].toUpperCase()+i.slice(1).toLowerCase()),i=o+i+l,i=i.replace(/(.)\1+/g,"$1"),i=i.replace(/ˈ/g,"").replace(/'/g,""),{engli:i,confidence:h}}));return{engli:s.map(e=>e.engli).join(" "),confidence:s.reduce((e,o)=>e+o.confidence,0)/s.length}}const a=document.querySelector("#input"),f=document.querySelector("#output"),p=document.querySelector("#confidence");let d;function T(t){let n="#84d35980",s="This is a fully accurate translation.";t<.5?(n="#ff4a4a80",s="This is a very inaccurate translation."):t<.75&&(n="#d3a52f80",s="This is a somewhat inaccurate translation."),s+=`
(${Math.round(t*100)}% confidence)`,s+=`
<progress value="${t}" max="1"></progress>`,p.style.outlineColor=n,p.innerHTML=s}a.addEventListener("input",async()=>{if(d!==void 0&&clearTimeout(d),a.value.trim()===""){f.value="",p.innerHTML="",p.style.outlineColor="transparent";return}if(x(a.value)){let n=await C(a.value);f.value=n.engli,T(n.confidence)}else f.value="...",d=setTimeout(async()=>{let n=await C(a.value);f.value=n.engli,T(n.confidence)},500)});
